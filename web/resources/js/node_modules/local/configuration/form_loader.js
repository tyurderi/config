module.exports = Class.create({

    builder: null,

    $container: null,

    config: null,

    constructor: function($container, config)
    {
        var me = this;

        me.builder    = new (require('local/form_builder'));
        me.$container = $container;
        me.config     = config;
    },

    load: function()
    {
        var me  = this,
            url = me.$container.attr('data-loadFieldsUrl');

        $.get(url, { id: me.config.id }, function(response) {
            response.data.forEach(function(field) {
                field.field_type = JSON.parse(field.field_type);

                me.$container.append(me.builder.create(field));
            })
        })
    }

});